# 🎮 ゲーム課金トラッカー

Googleスプレッドシートと連携して、当日のゲーム課金額をリアルタイムで表示するウェブアプリです。

## ✨ 機能

- 📊 Googleスプレッドシートからデータを自動取得
- ⚡ 10秒ごとの自動更新でリアルタイム反映
- 💰 当日の合計課金額を一目で確認
- 🎯 ゲームごとの課金詳細を表示
- 💾 設定情報をブラウザに保存（再入力不要）
- 🎨 デスクトップ表示に最適化されたモダンなUI

## 📋 必要なもの

1. Googleアカウント
2. Googleスプレッドシート
3. Google Sheets API キー

## 🚀 セットアップ手順

### 1. Googleスプレッドシートの準備

以下の形式でスプレッドシートを作成してください：

| A列: ゲーム名 | B列: 金額 | C列: 時刻 |
|--------------|----------|----------|
| 原神 | 3000 | 2026-01-11 14:30 |
| ウマ娘 | 5000 | 2026-01-11 15:45 |
| FGO | 2000 | 2026-01-11 16:20 |

**重要な注意点：**
- 1行目はヘッダー行として使用されます（データとして読み込まれません）
- A列: ゲーム名（必須）
- B列: 課金額（数字のみ、必須）
- C列: 時刻（推奨フォーマット: `YYYY-MM-DD HH:MM`）
- C列の日付が本日と一致するデータのみが表示されます

### 2. Google Sheets APIキーの取得

#### ステップ1: Google Cloud Consoleへアクセス
1. [Google Cloud Console](https://console.cloud.google.com/) にアクセス
2. Googleアカウントでログイン

#### ステップ2: プロジェクトの作成
1. 画面上部の「プロジェクトを選択」をクリック
2. 「新しいプロジェクト」をクリック
3. プロジェクト名を入力（例: "ゲーム課金トラッカー"）
4. 「作成」をクリック

#### ステップ3: Google Sheets APIの有効化
1. 左側のメニューから「APIとサービス」→「ライブラリ」を選択
2. 検索バーで「Google Sheets API」を検索
3. 「Google Sheets API」をクリック
4. 「有効にする」ボタンをクリック

#### ステップ4: APIキーの作成
1. 左側のメニューから「APIとサービス」→「認証情報」を選択
2. 上部の「+ 認証情報を作成」をクリック
3. 「APIキー」を選択
4. 作成されたAPIキーをコピー（後で使用します）

#### ステップ5: APIキーの制限設定（推奨）
1. 作成したAPIキーの「編集」をクリック
2. 「APIの制限」セクションで「キーを制限」を選択
3. 「Google Sheets API」にチェックを入れる
4. 「保存」をクリック

### 3. スプレッドシートの共有設定

1. 作成したGoogleスプレッドシートを開く
2. 右上の「共有」ボタンをクリック
3. 「一般的なアクセス」を「リンクを知っている全員」に変更
4. 権限は「閲覧者」のままでOK
5. 「完了」をクリック

### 4. アプリの設定

1. `game-spending-tracker/index.html` をブラウザで開く
2. 以下の情報を入力：
   - **Google Sheets API Key**: 先ほど取得したAPIキー
   - **スプレッドシートID**: スプレッドシートのURLから取得
     - URL: `https://docs.google.com/spreadsheets/d/【この部分がスプレッドシートID】/edit`
   - **シート名**: シートのタブ名（デフォルトは `Sheet1`）
3. 「保存」ボタンをクリック

## 💡 使い方

### 基本的な使い方
1. 設定が完了すると、自動的にデータが読み込まれます
2. 10秒ごとに自動更新されます
3. スプレッドシートに新しい行を追加すると、次回の更新時に反映されます

### デスクトップ表示として使用
1. ブラウザでフルスクリーン表示（F11キー）にする
2. または、デスクトップの隅に小さなウィンドウとして配置

### Googleスプレッドシートへのデータ追加
1. スプレッドシートを開く
2. 新しい行に以下の形式でデータを追加：
   ```
   ゲーム名 | 金額 | 日時（YYYY-MM-DD HH:MM）
   ```
3. 数秒〜10秒以内にウェブアプリに反映されます

## 🔧 トラブルシューティング

### データが表示されない場合

1. **APIキーが正しいか確認**
   - Google Cloud Consoleで再度確認
   - APIキーがコピーミスしていないか確認

2. **Google Sheets APIが有効になっているか確認**
   - Google Cloud Console → APIとサービス → 有効なAPIで確認

3. **スプレッドシートが共有設定されているか確認**
   - スプレッドシートの共有設定を「リンクを知っている全員」に設定

4. **スプレッドシートIDが正しいか確認**
   - URLから正しいIDをコピーしているか確認

5. **ブラウザの開発者ツールでエラーを確認**
   - F12キーを押して開発者ツールを開く
   - Consoleタブでエラーメッセージを確認

### CORS エラーが発生する場合

Google Sheets API v4を使用しているため、CORSエラーは発生しないはずですが、もし発生した場合：
- APIキーの設定が正しいか確認
- スプレッドシートの共有設定を確認

### 本日のデータのみ表示されない場合

C列（時刻列）の日付フォーマットを確認してください：
- 推奨フォーマット: `YYYY-MM-DD HH:MM`（例: `2026-01-11 14:30`）
- または、時刻のみ（例: `14:30`）の場合、すべてのデータが「本日」として扱われます

## 📱 応用例

### スマートフォンからデータを入力
1. Google スプレッドシートアプリをインストール
2. 外出先から課金したらすぐにスプレッドシートに追記
3. 自宅のデスクトップで自動的に反映

### 複数人で共有
1. スプレッドシートを複数人で共有
2. 各自が課金情報を入力
3. 全員のデータを一元管理

### 月次レポート作成
1. スプレッドシートでピボットテーブルやグラフを作成
2. 月ごとの課金傾向を分析

## 🎨 カスタマイズ

### 更新間隔の変更
`index.html` の以下の行を編集：
```javascript
const UPDATE_INTERVAL = 10000; // ミリ秒単位（10000 = 10秒）
```

### デザインのカスタマイズ
`index.html` の `<style>` タグ内のCSSを編集して、好みのデザインに変更できます。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 サポート

問題が発生した場合は、GitHubのIssuesでお知らせください。

---

Happy Tracking! 🎮💰
